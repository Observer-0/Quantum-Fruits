<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaporation Lab | Quantum Fruits</title>
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/evaporation-lab.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="../js/unity.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <nav class="top-nav">
        <a href="../index.html" class="nav-link">Back to Overview</a>
        <a href="./motor.html" class="nav-link">Motor Lab</a>
    </nav>

    <main class="lab-shell">
        <header class="hero">
            <div class="hero-kicker">SigmaP Evaporation Sandbox</div>
            <h1>Black-Hole <span>Evaporation Lab</span></h1>
            <p>
                Interactive comparison between semiclassical Hawking evaporation and sigma_P regularized evolution.
                Explore how <code>alpha</code>, <code>gamma</code>, and remnant scale reshape the Page-like curve,
                temperature cap, and lifetime.
            </p>
        </header>

        <section class="workspace">
            <aside class="panel controls">
                <h2 class="panel-title">Controls</h2>

                <div class="control-group">
                    <label for="massPreset">Mass preset</label>
                    <select id="massPreset">
                        <option value="pbh">Primordial (1e12 kg)</option>
                        <option value="stellar">Stellar (10 M_sun)</option>
                        <option value="supermassive">Supermassive (1e6 M_sun)</option>
                        <option value="custom">Custom mass</option>
                    </select>
                </div>

                <div class="control-group" id="customMassWrap" style="display: none;">
                    <label for="customMass">Custom M0 [kg]</label>
                    <input id="customMass" type="text" value="1e12" inputmode="decimal">
                </div>

                <div class="control-group">
                    <label for="alphaRange">
                        alpha smoothing
                        <span class="value-chip" id="alphaValue">4.00</span>
                    </label>
                    <input id="alphaRange" type="range" min="0.10" max="10.00" step="0.10" value="4.00">
                </div>

                <div class="control-group">
                    <label for="gammaRange">
                        gamma flux scale
                        <span class="value-chip" id="gammaValue">1.00</span>
                    </label>
                    <input id="gammaRange" type="range" min="0.00" max="5.00" step="0.05" value="1.00">
                </div>

                <div class="control-group">
                    <label for="remRange">
                        remnant factor
                        <span class="value-chip" id="remValue">1.00 MP</span>
                    </label>
                    <input id="remRange" type="range" min="0.10" max="5.00" step="0.05" value="1.00">
                </div>

                <div class="control-group">
                    <label for="stepsRange">
                        resolution
                        <span class="value-chip" id="stepsValue">1200 pts</span>
                    </label>
                    <input id="stepsRange" type="range" min="200" max="3200" step="100" value="1200">
                </div>

                <div class="control-group">
                    <label>Time axis</label>
                    <div class="segmented">
                        <label for="modeNormalized">
                            <input type="radio" id="modeNormalized" name="timeMode" value="normalized" checked>
                            normalized
                        </label>
                        <label for="modeYears">
                            <input type="radio" id="modeYears" name="timeMode" value="years">
                            years
                        </label>
                    </div>
                </div>

                <div class="btn-row">
                    <button class="btn btn-primary" id="runButton" type="button">Run</button>
                    <button class="btn btn-secondary" id="resetButton" type="button">Reset</button>
                </div>

                <div class="hint-box">
                    Minimal-natural closure: sigma_P sets <code>lP</code>, <code>tP</code>, and the UV temperature cap.
                    <code>gamma</code> exposes a clean hook for greybody / effective dof scans.
                </div>
            </aside>

            <section class="stage">
                <div class="metrics-grid">
                    <article class="metric-card">
                        <span class="metric-label">tau_sc</span>
                        <span class="metric-value" id="metricTauSc">-</span>
                        <span class="metric-sub" id="metricTauScSub">-</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">tau_eff</span>
                        <span class="metric-value" id="metricTauEff">-</span>
                        <span class="metric-sub" id="metricTauEffSub">-</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">T_cap</span>
                        <span class="metric-value" id="metricTempCap">-</span>
                        <span class="metric-sub">Planck-scale cap</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">S_rem / kB</span>
                        <span class="metric-value" id="metricSrem">-</span>
                        <span class="metric-sub">final remnant entropy</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">r_s</span>
                        <span class="metric-value" id="metricRs">-</span>
                        <span class="metric-sub">initial Schwarzschild radius</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">r_Pl / r_s</span>
                        <span class="metric-value" id="metricRatio">-</span>
                        <span class="metric-sub">Planck-curvature scale ratio</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">current time</span>
                        <span class="metric-value" id="metricNowTime">-</span>
                        <span class="metric-sub" id="metricNowTimeSub">-</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">current mass</span>
                        <span class="metric-value" id="metricNowMass">-</span>
                        <span class="metric-sub" id="metricNowMassSub">-</span>
                    </article>
                </div>

                <div class="panel timeline-panel">
                    <div class="timeline-head">
                        <button class="btn btn-secondary" id="playButton" type="button">Play</button>
                        <span class="timeline-readout" id="timelineReadout">frame 0/0</span>
                    </div>
                    <input class="timeline-slider" id="timeline" type="range" min="0" max="0" value="0" step="1">
                </div>

                <div class="charts-grid">
                    <article class="chart-panel">
                        <h3>Mass Evolution</h3>
                        <div class="chart-wrap">
                            <canvas id="massChart"></canvas>
                        </div>
                    </article>
                    <article class="chart-panel">
                        <h3>Temperature Evolution</h3>
                        <div class="chart-wrap">
                            <canvas id="tempChart"></canvas>
                        </div>
                    </article>
                    <article class="chart-panel">
                        <h3>Entropy Flow</h3>
                        <div class="chart-wrap">
                            <canvas id="entropyChart"></canvas>
                        </div>
                    </article>
                    <article class="chart-panel">
                        <h3>Page-Like Curves</h3>
                        <div class="chart-wrap">
                            <canvas id="pageChart"></canvas>
                        </div>
                    </article>
                </div>

                <div class="notes-grid">
                    <article class="note note-cyan">
                        <h4>Interpretation</h4>
                        <p>
                            The semiclassical track is a reference. The quantized branch enforces a finite endpoint and
                            a finite temperature cap from the spacetime grain scales.
                        </p>
                    </article>
                    <article class="note note-amber">
                        <h4>Scan Strategy</h4>
                        <p>
                            Start with fixed <code>M0</code>, then sweep <code>gamma</code> and <code>alpha</code>.
                            Use the scrubber to inspect where entropy turn-over and mass suppression begin.
                        </p>
                    </article>
                </div>
            </section>
        </section>
    </main>

    <script src="../js/evaporation-engine.js"></script>
    <script src="../js/evaporation-lab.js"></script>
</body>

</html>
