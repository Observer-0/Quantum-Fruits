<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zander Scaling Lab</title>
    <link rel="stylesheet" href="../css/theme.css">
    <style>
        body {
            background-color: #0f172a;
            color: #e2e8f0;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: #38bdf8;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        h2 {
            font-size: 1.1rem;
            color: #94a3b8;
            font-weight: 400;
            margin-bottom: 2rem;
            text-align: center;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            background: rgba(0, 0, 0, 0.2);
            padding: 1.5rem;
            border-radius: 8px;
        }

        label {
            font-weight: 600;
            color: #e2e8f0;
        }

        input[type="number"] {
            background: #1e293b;
            border: 1px solid #475569;
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 1rem;
            width: 150px;
        }

        select {
            background: #1e293b;
            border: 1px solid #475569;
            color: #fff;
            padding: 0.5rem;
            border-radius: 6px;
            font-size: 1rem;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: rgba(15, 23, 42, 0.6);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid #38bdf8;
        }

        .metric-card.accent-rose {
            border-color: #fb7185;
        }

        .metric-card.accent-emerald {
            border-color: #34d399;
        }

        .metric-card.accent-amber {
            border-color: #fbbf24;
        }

        .metric-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #94a3b8;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 1.25rem;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: #fff;
        }

        .metric-unit {
            font-size: 0.8rem;
            color: #64748b;
            margin-left: 0.25rem;
        }

        canvas {
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 8px;
            border: 1px solid #334155;
            margin-top: 1rem;
        }

        .formula-display {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 6px;
            text-align: center;
            color: #cbd5e1;
            font-size: 0.9rem;
        }

        .back-link {
            display: block;
            margin-top: 2rem;
            text-align: center;
            color: #94a3b8;
            text-decoration: none;
        }

        .back-link:hover {
            color: #38bdf8;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>Zander Scaling Potential</h1>
        <h2>Parameter-free investigation of the Action-Geometry Coupling</h2>

        <div class="controls">
            <div>
                <label for="massInput">Mass (M)</label>
                <input type="number" id="massInput" value="1" min="0" step="any" oninput="updateSimulation()">
            </div>
            <div>
                <label for="unitSelect">Unit</label>
                <select id="unitSelect" onchange="updateSimulation()">
                    <option value="solar">Solar Masses (M☉)</option>
                    <option value="kg">Kilograms (kg)</option>
                    <option value="planck">Planck Masses (mₚ)</option>
                </select>
            </div>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Schwarzschild Radius ($r_s$)</div>
                <div class="metric-value" id="val-rs">0</div>
                <div class="metric-unit">meters</div>
            </div>
            <div class="metric-card accent-emerald">
                <div class="metric-label">Zander Potential $Z(r_s)$</div>
                <div class="metric-value" id="val-z">0</div>
                <div class="metric-unit">J·m (?)</div>
            </div>
            <div class="metric-card accent-amber">
                <div class="metric-label">Ratio $\xi = Z(r_s) / (\hbar c)$</div>
                <div class="metric-value" id="val-ratio-hc">0</div>
                <div class="metric-unit">dimensionless</div>
            </div>
            <div class="metric-card accent-rose">
                <div class="metric-label">Hawking Comp. Term</div>
                <div class="metric-value" id="val-ratio-th">0</div>
                <div class="metric-unit">Scalar</div>
            </div>
        </div>

        <div class="formula-display">
            $$ Z(r) = \frac{\hbar^2}{c \cdot r} \quad | \quad r_s = \frac{2GM}{c^2} \quad | \quad T_H \sim \frac{1}{M}
            $$
        </div>

        <canvas id="scalingChart"></canvas>
        <div style="text-align: center; margin-top:0.5rem; color:#64748b; font-size:0.8rem;">Log-Log Plot: Radius (m) vs
            Z-Potential</div>

        <a href="theory.html" class="back-link">&larr; Back to Theory</a>
    </div>

    <!-- MathJax for rendering formulas if needed, simple text used in layout for speed -->

    <script>
        // --- 1. Natural Constants ---
        const H_BAR = 1.054571817e-34; // J s
        const C = 2.99792458e8;        // m/s
        const G = 6.67430e-11;         // m^3 kg^-1 s^-2
        const K_B = 1.380649e-23;      // J/K
        const M_SOLAR = 1.989e30;      // kg
        const M_PLANCK = Math.sqrt((H_BAR * C) / G); // kg (~2.17e-8)

        // --- 2. Calculation Logic ---
        function calculatePhysics(massKg) {
            // Schwarzschild Radius
            const rs = (2 * G * massKg) / (C * C);

            // Zander Scaling Function: Z(r) = hbar^2 / (c * r)
            // Evaluated at r_s
            const z_rs = (H_BAR * H_BAR) / (C * rs);

            // Factor hbar * c
            const h_c = H_BAR * C;

            // Ratio 1: Z / (hbar c)
            // Represents strength relative to fundamental quantum action-length product
            const ratio_hc = z_rs / h_c;

            // Ratio 2: Comparison with "Hawking Term" structure provided by user
            // User Formula: Z(rs) / ( (hbar c) / (8 pi k_B rs) )
            // Wait, careful with interpretation. The user provided T_H in Kelvin.
            // Let's calculate the denominator value.
            const denom_hawking = (H_BAR * C) / (8 * Math.PI * K_B * rs);

            // This ratio compares numerical magnitudes given the unit definition ambiguity
            const ratio_th = z_rs / denom_hawking;

            return {
                rs: rs,
                z_rs: z_rs,
                ratio_hc: ratio_hc,
                ratio_th: ratio_th
            };
        }

        // --- 3. Visualization Loop (Canvas) ---
        const canvas = document.getElementById('scalingChart');
        const ctx = canvas.getContext('2d');

        function drawGraph(activeRs) {
            const width = canvas.width = canvas.offsetWidth;
            const height = canvas.height = canvas.offsetHeight;

            // Clear
            ctx.fillStyle = "#000000";
            ctx.fillRect(0, 0, width, height);

            // Define Log-Log Ranges
            // X: 1e-35 (Planck) to 1e16 (Light Year approx)
            const minXLog = -35;
            const maxXLog = 16;
            // Y: Z(r) range. 
            // Z(l_P) ~ 1e-68 / 1e-26 = 1e-42? No.
            // Z(l_P) = hbar^2 / (c l_P). l_P ~ 1.6e-35. hbar^2~1e-68 c~3e8 => 1e-68 / (5e-27) ~ 2e-42.
            // Z(1e16) = hbar^2 / (c 1e16) ~ 1e-68 / (3e24) ~ 3e-93.
            // So Y range: -95 to -30
            const minYLog = -100;
            const maxYLog = -30;

            const scaleX = (valLog) => {
                return ((valLog - minXLog) / (maxXLog - minXLog)) * width;
            };
            const scaleY = (valLog) => {
                return height - ((valLog - minYLog) / (maxYLog - minYLog)) * height;
            };

            // Grid Lines
            ctx.strokeStyle = "#334155";
            ctx.lineWidth = 1;
            for (let i = minXLog; i <= maxXLog; i += 5) {
                const x = scaleX(i);
                ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, height); ctx.stroke();
                ctx.fillStyle = "#64748b";
                ctx.fillText(`10^${i}m`, x + 5, height - 10);
            }

            // Draw Z(r) Curve
            ctx.strokeStyle = "#34d399";
            ctx.lineWidth = 3;
            ctx.beginPath();

            for (let rLog = minXLog; rLog <= maxXLog; rLog += 0.5) {
                const r = Math.pow(10, rLog);
                const z = (H_BAR * H_BAR) / (C * r);
                const zLog = Math.log10(z);

                const x = scaleX(rLog);
                const y = scaleY(zLog);

                if (rLog === minXLog) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Draw Active Point (Current Mass)
            if (activeRs > 0) {
                const activeRsLog = Math.log10(activeRs);
                const activeZ = (H_BAR * H_BAR) / (C * activeRs);
                const activeZLog = Math.log10(activeZ);

                if (activeRsLog >= minXLog && activeRsLog <= maxXLog) {
                    const px = scaleX(activeRsLog);
                    const py = scaleY(activeZLog);

                    // Point
                    ctx.fillStyle = "#fbbf24";
                    ctx.beginPath();
                    ctx.arc(px, py, 6, 0, Math.PI * 2);
                    ctx.fill();

                    // Crosshair lines
                    ctx.setLineDash([5, 5]);
                    ctx.strokeStyle = "#fbbf24";
                    ctx.beginPath();
                    ctx.moveTo(px, height); ctx.lineTo(px, py); ctx.lineTo(0, py);
                    ctx.stroke();
                    ctx.setLineDash([]);

                    // Label
                    ctx.fillStyle = "#fff";
                    ctx.fillText(`Current r_s: 10^${activeRsLog.toFixed(1)}m`, px + 10, py - 10);
                }
            }
        }

        // --- 4. Main Interaction ---
        function updateSimulation() {
            const inputVal = parseFloat(document.getElementById('massInput').value);
            const unit = document.getElementById('unitSelect').value;

            let massKg = inputVal;
            if (unit === 'solar') massKg = inputVal * M_SOLAR;
            if (unit === 'planck') massKg = inputVal * M_PLANCK;

            const res = calculatePhysics(massKg);

            // Update DOM
            document.getElementById('val-rs').innerText = res.rs.toExponential(3);
            document.getElementById('val-z').innerText = res.z_rs.toExponential(3);
            document.getElementById('val-ratio-hc').innerText = res.ratio_hc.toExponential(3);
            document.getElementById('val-ratio-th').innerText = res.ratio_th.toExponential(3);

            drawGraph(res.rs);
        }

        // Initialize
        window.addEventListener('resize', updateSimulation);
        updateSimulation();

    </script>
</body>

</html>